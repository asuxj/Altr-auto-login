name: Altr Daily Auto Claim # 任务名称

on:
  schedule:
    # 定时任务：每天国际标准时间 01:00 (北京时间上午 09:00) 运行
    - cron: '0 1 * * *'
  workflow_dispatch: # 允许你手动点击按钮触发测试

jobs:
  build:
    runs-on: ubuntu-latest # 使用最新的 Ubuntu 服务器

    steps:
      - name: Checkout code
        uses: actions/checkout@v3 # 第一步：下载你的代码仓库

      - name: Set up Python
        uses: actions/setup-python@v4 # 第二步：安装 Python 环境
        with:
          python-version: '3.9'

      - name: Install dependencies
        run: | # 第三步：安装依赖库
          python -m pip install --upgrade pip
          # 安装旧脚本的依赖（如果有的话）
          if [ -f requirements.txt ]; then pip install -r requirements.txt; fi
          # 【重要】强制安装两个脚本都必须的 selenium 和 webdriver_manager
          pip install selenium webdriver_manager

      # ========================================================
      # 旧脚本区域 (Altr 自动签到) - 已启用并支持多账号
      # ========================================================
      - name: Altr 自动签到
        env: 
          # 请在 GitHub Secrets 中添加 ALTR_ACCOUNTS
          # 格式: 账号1:密码1,账号2:密码2
          ALTR_ACCOUNTS: ${{ secrets.ALTR_ACCOUNTS }}
        run: python -u Altr.py # -u 参数保证日志实时输出

      # ========================================================
      # 新脚本区域 (Zampto 自动续费)
      # ========================================================
      - name: Zampto 自动续费
        env:
          # 读取你在 Secrets 里设置的 ZAMPTO_ACCOUNTS (格式: 账号:密码,账号:密码)
          ZAMPTO_ACCOUNTS: ${{ secrets.ZAMPTO_ACCOUNTS }}
        # 运行新脚本，-u 参数保证日志实时输出
        run: python -u zampto.py
